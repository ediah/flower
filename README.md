# Model Language Compiler

[![Total alerts](https://img.shields.io/lgtm/alerts/g/ediah/mlc.svg?logo=lgtm&logoWidth=18)](https://lgtm.com/projects/g/ediah/mlc/alerts/)
[![Language grade: C/C++](https://img.shields.io/lgtm/grade/cpp/g/ediah/mlc.svg?logo=lgtm&logoWidth=18)](https://lgtm.com/projects/g/ediah/mlc/context:cpp)

В папке `test` находятся две группы тестов:

1) `A-unit` -- корректные программы
2) `B-unit` -- программы, содержащие ошибки

Рядом с каждым пунктом из списка ниже стоит пометка о том, какой из тестов покрывает данную функциональность. `B3` означает, что это 3-й тест (`unit3.ml`) из группы `B-unit`.

## Статус
### Синтаксис
#### Условные операторы
- [x] **if - {else}** `[A1, A4, A5, A6]`
- [ ] **case - of**
#### Операторы цикла
- [x] **for** `[A2, A3, B3]`
- [x] **while** `[A4-6, B3]`
- [ ] **do - while**
- [ ] **for - step - until - do**
#### Операторы перехода
- [x] **break** `[A5, B4]`
- [x] **continue** `[A14]`
- [x] **goto** `[A12]`
#### Типы данных
- [x] **integer** `[A1, A3, A4, A6, A8-11, B1-3]`
- [x] **real** `[A3, A10, A11, A13, A17, B3]`
- [x] **string** `[A2, A5, A6, B2, B3]`
- [x] **boolean** `[A1, B3]`
- [x] **struct** `[A8, A9]`
#### Дополнительные операции
- [x] **read** `[A1, A3, A5, A6, B3]`
- [x] **write** `[A1-6, B1, B2]`
- [x] Унарный минус `[A12]`
- [x] Унарный плюс `[A12]`
- [x] % -- остаток от деления `[A1]`
- [x] Работа с функциями `[A15-17, A19]`
#### Правила работы с функциями
- **def** <идентификатор> **(** *[*<описания переменных>*]* **):** <простой тип> **{** *[*<описания переменных>*]* *[* <операторы> *]* **return** <выражение>**;** **}**
- <идентификатор> **(** *[* <идентификатор> *]* *{***,** <идентификатор>*}***)**
- [x] Каждое описание начинается с ключевого слова **def**. `[A15-17, A19, B10]`
- [x] Формальные параметры одинакового типа можно описать через запятую без повторения типа. Параметры разного типа следует отделять **;**. `[A15-17, A19, B9]`
- [x] После описания формальных параметров идёт определение типа возвращаемого функцией значения. `[A15-17, A19, B12]`
- [x] Переменные, описанные внутри некоторой функции (в том числе, в заголовке), доступны только в этой функции. `[A15-17, A19, B6, B8]`
- [x] В функции обязательно должен быть оператор возврата **return**. `[A15-17, A19, B11]`
- [x] На момент вызова функции она должна быть описана. `[A15-17, A19, B13]`
- [x] Количество фактических параметров должно совпадать с количеством формальных.`[A15-17, A19, B14]`
- [x] Типы фактических параметров должны совпадать с типами формальных. `[A15-17, A19, B14]`
#### Правило вычисления логических выражений
- [ ] "Ленивые" вычисления логических выражений
- [x] Вычисления по обычной схеме

### Контекстные условия
- [x] Любой идентификатор описан и только один раз `[B1, B4]`
- [x] При инициализации типы констант совпадают с типами переменных `[B2]`
- [x] С помощью операторов **read** и **write** можно вводить и выводить значения любых простых типов, определенных в языке. `[A11]`
- [ ] В операторе цикла с параметром **for - step - until - do** тип выражений и параметра цикла должен быть целочисленным.
- [x] В операторе цикла for типы 1-ого и 3-его выражений произвольные. `[A13]`
- [x] Только логическое выражение может использоваться в условном операторе **if**, в операторах цикла **while**, **for** и **do-while** в качестве условия завершения цикла. `[A1-6, B4]`
- [x] Описанием идентификатора-метки считается ее первое использование в программе. Разные операторы не могут быть помечены одинаковыми метками. Одна и та же метка не может помечать один и тот же оператор более одного раза. Метка может находиться как до, так и после оператора **goto**, задающего переход по этой метке. `[A12]`
- [x] Операторы **break** и **continue** могут встречаться только внутри тела цикла. Появление этих операторов вне цикла является ошибкой. `[B4]`
- [x] Определения структур находятся в начале программы до описаний переменных. Выделять для имен структур отдельное пространство имен (в этом случае использование перед именем ключевого слова **struct** будет обязательно). `[A8, A9]`
- [x] Допустимые типы полей внутри структуры – простые (**int**, **bool**, **real**, **string**) и составные. `[A9]`
- [x] Использование значений полей структуры в выражениях такое же, как и у переменных того же типа. `[A10]`
- [x] Возможно присваивание структур целиком, причем только для структур одного типа. Эквивалентность типов здесь именная, т.е. определяется именем структуры, а не набором ее полей. `[A9]`
- [ ] Тип выражения и констант вариантов в операторе **case** должен быть целочисленным.
- [x] Тип выражения и совместимость типов операндов в выражении определяются по правилам, приведенным в Таблице №1.

### Таблица №1
|     Операция    |  Тип X  |  Тип Y  | Тип результата |
| --------------- | ------- | ------- | -------------- |
| + − * / %       | int     | int     | int            |
| + − * /         | real    | real    | real           |
| + − * /         | real    | int     | real           |
| + − * /         | int     | real    | real           |
| +               | string  | string  | string         |
| унарные +-      | int     | -       | int            |
| унарные +-      | real    | -       | real           |
| < > <= >= == != | int     | int     | boolean        |
| < > <= >= == != | real    | int     | boolean        |
| < > <= >= == != | int     | real    | boolean        |
| < > <= >= == != | real    | real    | boolean        |
| < > == !=       | string  | string  | boolean        |
| and or          | boolean | boolean | boolean        |
| not             | boolean | -       | boolean        |
| =               | int     | int     | int            |
| =               | int     | real    | int            |
| =               | real    | int     | real           |
| =               | real    | real    | real           |
| =               | string  | string  | string         |
| =               | boolean | boolean | boolean        |

### Правила записи текста программы
- [x] В любом месте программы, кроме идентификаторов, служебных слов и числовых констант, может находиться произвольное число пробельных литер и комментариев вида 
`/* 〈любые символы, кроме */ 〉 */` `[A8]`
- [x] Пробел в строковой константе считается значащим символом строки. `[A1-5]`
- [x] Внутри идентификаторов, служебных слов, числовых констант и разделителей, состоящих из нескольких символов, пробельные литеры недопустимы.
- [x] Между идентификаторами, числами и служебными словами должен находиться хотя бы один разделитель текста. Разделитель текста — это пробельная литера, комментарий либо разделитель, определенный в алфавите языка ( * / % + − < > <= >= == != , ; : ( ) ).

## Цели Make
**mlc** (default) -- сборка компилятора.

**check** -- статический анализ **cppcheck** с отчётом.
